<html>
	<head></head>
	
	<body>
		<h3>Storing User Preferences in LocalStorage</h3>
		<hr/>
		
		
		<fieldset>
			<legend>Eployee Data</legend>
			
			Emplyee Id  :  <input type="text" id="uid"  name="uid"  />
			<br/><br/>
			
			Employee Email  :  <input type="text" id="email"  name="email"  />
			<br/><br/>
			
			Dept name  :  <input type="text"  id="dept"  name="dept"  />
			<br/><br/>

            Dept Location  :  <input type="text"  id="loc"  name="loc"  />
			<br/><br/>
			
			<input type="button"  value="Convert to JSON"   onclick="fn_saveData()" />
			
		</fieldset>
		
		<br/><br/>
		
		<fieldset>
		
			
			<p  id="p1"></p>
			
			
		</fieldset>
		
		
		
		<script>
		
		
				function  fn_saveData()
				{
						 // 1.  Get data from input fields 			
						var  txtUidObj =  document.getElementById("uid");	
						var  txtEmailObj =  document.getElementById("email");	
						var  txtDeptObj =  document.getElementById("dept");						
						var  txtLocObj =  document.getElementById("loc");						
				
						 
						 // 2.  Create object with input fields values 					
						var  userObj =  { };
						userObj.uid =  txtUidObj.value; 
						userObj.email =  txtEmailObj.value; 
						userObj.dept =  txtDeptObj.value; 
						userObj.loc =  txtLocObj.value;                         

					// 	alert(userObj);

						 
						 // 3. Convert the object into JSON string				
						var  str  =  JSON.stringify( userObj );
				//		alert(str);

						
						 // 4.  Store the string in localStorage	
						localStorage.setItem("employeeData",  str);

						alert("Employee details are stored in localStorage");


                        fn_getData();


                        function fn_getData()
				{
					// 1.  Reading data from localStorage		
					var  str =  localStorage.getItem("employeeData");			
						
					var paraObj =  document.getElementById("p1");
					  paraObj.innerHTML = str;
												
				 
					// 2.  Convert JSON string into object				
					  var  userObj =  JSON.parse(str);
					
										
					// 3.  Access html elements to display user data
					
					if(  str ==  null )
					{
							alert("There is no user data in localStorage");							
							return;   //  exit from the function 
					}
					
					var  txtUidObj =  document.getElementById("uid");	
					var  txtEmailObj =  document.getElementById("email");	
					var  txtTokenObj =  document.getElementById("dept");
					var  txtLocObj =  document.getElementById("loc");		

					 
					txtUidObj.value =  	 userObj.uid;
					txtEmailObj.value =  	 userObj.email;
					txtTokenObj.value =  	 userObj.dept;		
					txtLocObj.value =  	 userObj.loc;					 

				}			
                        
				}
				
		
					
		
		</script>
		
		
	</body>

</html>